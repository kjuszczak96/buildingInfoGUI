<div class="grid-container">
    <h1 class="mat-h1">Building View</h1>

    <button mat-fab color="primary" class="btn-fixed-br" (click)="openDialog()">
        <mat-icon>add</mat-icon>
    </button>

    <mat-card *ngFor="let building of (buildings$ | async)">
        <div>
            <p *ngIf="building.id">Id: {{ building.id }}</p>

            <p>Name: {{ building.name }}</p>

            <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                <mat-expansion-panel-header>
                    <mat-panel-title> levels: </mat-panel-title>
                </mat-expansion-panel-header>

                <div *ngFor="let level of building.levels">
                    <p>id: {{ level.id }}</p>
                    <p>name: {{ level.name }}</p>
                    <mat-expansion-panel
                        (opened)="panelOpenState = true"
                        (closed)="panelOpenState = false"
                    >
                        <mat-expansion-panel-header>
                            <mat-panel-title> rooms: </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div *ngFor="let room of level.rooms">
                            <p>Id: {{ room.id }}</p>
                            <p>Name: {{ room.name }}</p>
                            <p>Area: {{ room.area }}</p>
                            <p>Volume: {{ room.volume }}</p>
                            <p>Heating power consumption: {{ room.heatingPowerConsumption }}</p>
                            <p>Illumination power: {{ room.illuminationPower }}</p>
                        </div>
                    </mat-expansion-panel>
                </div>
            </mat-expansion-panel>
        </div>

        <mat-dialog-actions>
            <button mat-mini-fab color="primary" class="btn-inline" (click)="getArea(building)">
                m<span class="superscript">2</span>
            </button>

            <button mat-mini-fab color="primary" class="btn-inline" (click)="getVolume(building)">
                m<span class="superscript">3</span>
            </button>

            <button mat-mini-fab color="primary" class="btn-inline" (click)="getIlluminationPower(building)">
                <mat-icon>brightness_low</mat-icon>
            </button>
            
            <button mat-mini-fab color="primary" class="btn-inline" (click)="openDialog(building)">
                <mat-icon>edit</mat-icon>
            </button>
        </mat-dialog-actions>
    </mat-card>
</div>
